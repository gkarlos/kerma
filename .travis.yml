language : cpp
os : linux
dist : bionic
sudo : required
addons :
  apt :
    sources :
      - ubuntu-toolchain-r-test
    packages:
      - cmake
      - git
      - doxygen

stages :
  - build
  - test

jobs : 
  include :
    - name : "gcc-llvm-9"
      stage : build
      compiler : gcc
      env : 
        - LLVM_VERSION=9
        - LLVM_HOME=/usr/lib/llvm-9
      before_script:
        - wget https://apt.llvm.org/llvm.sh
        - chmod +x llvm.sh
        - sudo ./llvm.sh $LLVM_VERSION
      script:
        - mkdir build && cd build && cmake ..
        - make
    - name : "clang-9-llvm-9"
      stage : build
      compiler : clang
      env : 
        - LLVM_VERSION=9
        - LLVM_HOME=/usr/lib/llvm-9
      before_script:
        - wget https://apt.llvm.org/llvm.sh
        - chmod +x llvm.sh
        - sudo ./llvm.sh $LLVM_VERSION
      script:
        - mkdir build && cd build && cmake ..
        - make